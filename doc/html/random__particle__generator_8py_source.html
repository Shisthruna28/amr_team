<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>amr_localization: random_particle_generator.py Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d55defa4ad773e94681dfca4853649f7.html">amr_localization</a></li><li class="navelem"><a class="el" href="dir_f959d057e100c74df8d7457ca0243cc5.html">nodes</a></li><li class="navelem"><a class="el" href="dir_8748cb395d2fbadb5379be43091f677b.html">src</a></li><li class="navelem"><a class="el" href="dir_d8abf0d8c840946e73f918933a3363a6.html">amr_localization</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">random_particle_generator.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="random__particle__generator_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespaceamr__localization_1_1random__particle__generator.html">    1</a></span>&#160;<span class="keyword">import</span> math</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">import</span> random</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceamr__localization_1_1particle.html">amr_localization.particle</a> <span class="keyword">import</span> Particle</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"># This class generates particles with random poses.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"># By default the poses are drawn from a uniform distribution across the</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"># rectangle given in the constructor. Optinally a bias towards a particular</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"># pose may be introduced for a limited time (see @ref setBias()). */</span></div>
<div class="line"><a name="l00010"></a><span class="lineno"><a class="line" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html">   10</a></span>&#160;<span class="keyword">class </span><a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html">RandomParticleGenerator</a>:</div>
<div class="line"><a name="l00011"></a><span class="lineno"><a class="line" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a71189e9117391e590e1aa2c42927187e">   11</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a71189e9117391e590e1aa2c42927187e">__init__</a>(self, min_x, max_x, min_y, max_y):</div>
<div class="line"><a name="l00012"></a><span class="lineno"><a class="line" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a540e80b4ec5967fcafad04c16113f040">   12</a></span>&#160;        self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a540e80b4ec5967fcafad04c16113f040">min_x</a> = min_x</div>
<div class="line"><a name="l00013"></a><span class="lineno"><a class="line" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a2f03bb7fcf9e3e534dfbaeec07d91870">   13</a></span>&#160;        self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a2f03bb7fcf9e3e534dfbaeec07d91870">max_x</a> = max_x</div>
<div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a887e5c5a8328dcb40a9d893f39eda092">   14</a></span>&#160;        self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a887e5c5a8328dcb40a9d893f39eda092">min_y</a> = min_y</div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a654ad3038f3570828f8cefd5c1da1a14">   15</a></span>&#160;        self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a654ad3038f3570828f8cefd5c1da1a14">max_y</a> = max_y</div>
<div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a5cbcd039fc801b700f9992966dc772e6">   16</a></span>&#160;        self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a5cbcd039fc801b700f9992966dc772e6">biased_particles</a> = 0</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        self,normalx = (0,0)</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;        self,normaly = (0,0)</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        self,normalt = (0,0)</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="comment"># Generate a random particle</span></div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#acd2124477e388b40324ea81acef4c92c">   22</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#acd2124477e388b40324ea81acef4c92c">generate_particle</a>(self):</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        p = <a class="code" href="classamr__localization_1_1particle_1_1Particle.html">Particle</a>()</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a5cbcd039fc801b700f9992966dc772e6">biased_particles</a> &gt; 0:</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;            p.pose.x = random.normal(self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#abe7fd80a8b8cf81a808180f5b50b6e05">normalx</a>)</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;            p.pose.y = random.normal(self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#adaa54c19aded704c7a25713d43ba26b4">normaly</a>)</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;            p.pose.theta = random.normal(self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a95330bd7e7d02da0684ab630fb66e5f7">normalt</a>)</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;            p.pose.x = random.uniform(self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a540e80b4ec5967fcafad04c16113f040">min_x</a>, self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a2f03bb7fcf9e3e534dfbaeec07d91870">max_x</a>)</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;            p.pose.y = random.uniform(self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a887e5c5a8328dcb40a9d893f39eda092">min_y</a>, self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a654ad3038f3570828f8cefd5c1da1a14">max_y</a>)</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            p.pose.theta = random.uniform(-math.pi, math.pi)</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a5cbcd039fc801b700f9992966dc772e6">biased_particles</a> -= 1</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        p.weight = 0.0</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <span class="keywordflow">return</span> p</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment"># Introduce a bias towards a certain point.</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment"># Here by bias we mean that the poses will be drawn from a normal</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment"># distribution around the bias pose.</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment"># @param pose : a pose around which random samples will be drawn.</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment"># @param std : standard deviation (same for x, y, and theta).</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="comment">#</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment"># @param particle_count : number of particles for which the bias will have</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment"># effect. After this many particles have been produced, the generator</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="comment"># switches to the &quot;uniform&quot; mode.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a275e384624b02e5efe9cb9a1d15cbcfd">   48</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a275e384624b02e5efe9cb9a1d15cbcfd">set_bias</a>(self, pose, std, particle_count):</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#abe7fd80a8b8cf81a808180f5b50b6e05">   49</a></span>&#160;        self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#abe7fd80a8b8cf81a808180f5b50b6e05">normalx</a> = (pose.x,std)</div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#adaa54c19aded704c7a25713d43ba26b4">   50</a></span>&#160;        self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#adaa54c19aded704c7a25713d43ba26b4">normaly</a> = (pose.y,std)</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a95330bd7e7d02da0684ab630fb66e5f7">   51</a></span>&#160;        self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a95330bd7e7d02da0684ab630fb66e5f7">normalt</a> = (pose.theta,std)</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        self.<a class="code" href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a5cbcd039fc801b700f9992966dc772e6">biased_particles</a> = particle_count</div>
<div class="ttc" id="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator_html"><div class="ttname"><a href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html">amr_localization.random_particle_generator.RandomParticleGenerator</a></div><div class="ttdef"><b>Definition:</b> <a href="random__particle__generator_8py_source.html#l00010">random_particle_generator.py:10</a></div></div>
<div class="ttc" id="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator_html_a2f03bb7fcf9e3e534dfbaeec07d91870"><div class="ttname"><a href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a2f03bb7fcf9e3e534dfbaeec07d91870">amr_localization.random_particle_generator.RandomParticleGenerator.max_x</a></div><div class="ttdeci">max_x</div><div class="ttdef"><b>Definition:</b> <a href="random__particle__generator_8py_source.html#l00013">random_particle_generator.py:13</a></div></div>
<div class="ttc" id="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator_html_a887e5c5a8328dcb40a9d893f39eda092"><div class="ttname"><a href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a887e5c5a8328dcb40a9d893f39eda092">amr_localization.random_particle_generator.RandomParticleGenerator.min_y</a></div><div class="ttdeci">min_y</div><div class="ttdef"><b>Definition:</b> <a href="random__particle__generator_8py_source.html#l00014">random_particle_generator.py:14</a></div></div>
<div class="ttc" id="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator_html_acd2124477e388b40324ea81acef4c92c"><div class="ttname"><a href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#acd2124477e388b40324ea81acef4c92c">amr_localization.random_particle_generator.RandomParticleGenerator.generate_particle</a></div><div class="ttdeci">def generate_particle</div><div class="ttdef"><b>Definition:</b> <a href="random__particle__generator_8py_source.html#l00022">random_particle_generator.py:22</a></div></div>
<div class="ttc" id="namespaceamr__localization_1_1particle_html"><div class="ttname"><a href="namespaceamr__localization_1_1particle.html">amr_localization.particle</a></div><div class="ttdef"><b>Definition:</b> <a href="particle_8py_source.html#l00001">particle.py:1</a></div></div>
<div class="ttc" id="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator_html_abe7fd80a8b8cf81a808180f5b50b6e05"><div class="ttname"><a href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#abe7fd80a8b8cf81a808180f5b50b6e05">amr_localization.random_particle_generator.RandomParticleGenerator.normalx</a></div><div class="ttdeci">normalx</div><div class="ttdef"><b>Definition:</b> <a href="random__particle__generator_8py_source.html#l00049">random_particle_generator.py:49</a></div></div>
<div class="ttc" id="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator_html_a275e384624b02e5efe9cb9a1d15cbcfd"><div class="ttname"><a href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a275e384624b02e5efe9cb9a1d15cbcfd">amr_localization.random_particle_generator.RandomParticleGenerator.set_bias</a></div><div class="ttdeci">def set_bias</div><div class="ttdef"><b>Definition:</b> <a href="random__particle__generator_8py_source.html#l00048">random_particle_generator.py:48</a></div></div>
<div class="ttc" id="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator_html_a95330bd7e7d02da0684ab630fb66e5f7"><div class="ttname"><a href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a95330bd7e7d02da0684ab630fb66e5f7">amr_localization.random_particle_generator.RandomParticleGenerator.normalt</a></div><div class="ttdeci">normalt</div><div class="ttdef"><b>Definition:</b> <a href="random__particle__generator_8py_source.html#l00051">random_particle_generator.py:51</a></div></div>
<div class="ttc" id="classamr__localization_1_1particle_1_1Particle_html"><div class="ttname"><a href="classamr__localization_1_1particle_1_1Particle.html">amr_localization.particle.Particle</a></div><div class="ttdef"><b>Definition:</b> <a href="particle_8py_source.html#l00010">particle.py:10</a></div></div>
<div class="ttc" id="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator_html_adaa54c19aded704c7a25713d43ba26b4"><div class="ttname"><a href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#adaa54c19aded704c7a25713d43ba26b4">amr_localization.random_particle_generator.RandomParticleGenerator.normaly</a></div><div class="ttdeci">normaly</div><div class="ttdef"><b>Definition:</b> <a href="random__particle__generator_8py_source.html#l00050">random_particle_generator.py:50</a></div></div>
<div class="ttc" id="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator_html_a71189e9117391e590e1aa2c42927187e"><div class="ttname"><a href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a71189e9117391e590e1aa2c42927187e">amr_localization.random_particle_generator.RandomParticleGenerator.__init__</a></div><div class="ttdeci">def __init__</div><div class="ttdef"><b>Definition:</b> <a href="random__particle__generator_8py_source.html#l00011">random_particle_generator.py:11</a></div></div>
<div class="ttc" id="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator_html_a654ad3038f3570828f8cefd5c1da1a14"><div class="ttname"><a href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a654ad3038f3570828f8cefd5c1da1a14">amr_localization.random_particle_generator.RandomParticleGenerator.max_y</a></div><div class="ttdeci">max_y</div><div class="ttdef"><b>Definition:</b> <a href="random__particle__generator_8py_source.html#l00015">random_particle_generator.py:15</a></div></div>
<div class="ttc" id="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator_html_a5cbcd039fc801b700f9992966dc772e6"><div class="ttname"><a href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a5cbcd039fc801b700f9992966dc772e6">amr_localization.random_particle_generator.RandomParticleGenerator.biased_particles</a></div><div class="ttdeci">biased_particles</div><div class="ttdef"><b>Definition:</b> <a href="random__particle__generator_8py_source.html#l00016">random_particle_generator.py:16</a></div></div>
<div class="ttc" id="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator_html_a540e80b4ec5967fcafad04c16113f040"><div class="ttname"><a href="classamr__localization_1_1random__particle__generator_1_1RandomParticleGenerator.html#a540e80b4ec5967fcafad04c16113f040">amr_localization.random_particle_generator.RandomParticleGenerator.min_x</a></div><div class="ttdeci">min_x</div><div class="ttdef"><b>Definition:</b> <a href="random__particle__generator_8py_source.html#l00012">random_particle_generator.py:12</a></div></div>
</div><!-- fragment --></div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/amr_localization">amr_localization</a><br />
Author(s): Alexander Hagg</br />
<small>autogenerated on Wed Jan 31 2018 20:58:29</small>
</div>
</body>
</html>
